<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="zsk">
    
    <meta name="baidu-site-verification" content="codeva-FDuSf8Qgto" />
    

    
    <title>
        
            HTTP TCP/IP协议与抓包原理 |
        
        zskのblog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="/images/head.svg">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/fontawesome/css/fontawesome.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/fontawesome/css/regular.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/fontawesome/css/solid.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/fontawesome/css/brands.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"www.zskkk.cn","root":"/","language":"zh-CN","path":"search.xml"};
    KEEP.theme_config = {"toc":{"enable":true,"number":true,"expand_all":true,"init_open":true},"style":{"primary_color":"#0066cc","logo":"/images/head.svg","favicon":"/images/head.svg","avatar":"/images/head.svg","font_size":null,"font_family":null,"hover":{"shadow":true,"scale":true},"first_screen":{"enable":true,"header_transparent":true,"background_img":"/images/bg.svg","description":"Keep writing and Keep loving.","font_color":null,"hitokoto":true},"scroll":{"progress_bar":true,"percent":true}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"mac"},"code_block":{"tools":{"enable":false,"style":"mac"},"highlight_theme":"obsidian"},"side_tools":{},"pjax":{"enable":false},"lazyload":{"enable":true},"comment":{"enable":true,"use":"valine","valine":{"appid":"WxNQs5QEQtykF82Sb7nAjXRO-gzGzoHsz","appkey":"4rZ6NwH5zAu6VEspHwVrgqOq","placeholder":"😜 尽情吐槽吧~"},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.7"},"waline":{"server_url":null,"reaction":false,"version":2}},"post":{"author_label":{"enable":true,"auto":true,"custom_label_list":["Trainee","Engineer","Architect"]},"word_count":{"enable":true,"wordcount":true,"min2read":true},"img_align":"left","copyright_info":true},"version":"3.5.2"};
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    KEEP.language_code_block = {"copy":"复制代码","copied":"已复制","fold":"折叠代码块","folded":"已折叠"};
  </script>

<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
                <a class="logo-image" href="/">
                    <img src="/images/head.svg">
                </a>
            
            <a class="logo-title" href="/">
               zskのblog
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                标签
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                关于
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">标签</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">关于</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">
            <div class="article-title">
                <span class="title-hover-animation">HTTP TCP/IP协议与抓包原理</span>
            </div>
            
                <div class="article-header">
                    <div class="avatar">
                        <img src="/images/head.svg">
                    </div>
					
                    <div class="info">
                        <div class="author">
                            <span class="name">zsk</span>
                            
                                <span class="author-label">Lv4</span>
                            
                        </div>
                        <div class="meta-info">
                            
<div class="article-meta-info">
    <span class="article-date article-meta-item">
        
            <i class="fa-regular fa-calendar-plus"></i>&nbsp;
        
        <span class="pc">2021-06-01 00:00:00</span>
        <span class="mobile">2021-06-01 00:00</span>
    </span>
    
        <span class="article-update-date article-meta-item">
        <i class="fas fa-file-pen"></i>&nbsp;
        <span class="pc">2021-06-01 00:00:00</span>
    </span>
    
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/%E6%8A%93%E5%8C%85/">抓包</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>4.1k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>15 分钟</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
	
	
	  <i class="fa fa-thumb-tack"></i>
	  置顶
	
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content keep-markdown-body">
                <h1 id="网络基础-TCP-x2F-IP"><a href="#网络基础-TCP-x2F-IP" class="headerlink" title="网络基础 TCP&#x2F;IP"></a>网络基础 TCP&#x2F;IP</h1><p>在说Http之前，先来说一下TCP&#x2F;IP协议。</p>
<p>TCP&#x2F;IP协议是众多协议的统称，像HTTP，TCP,UDP,DNS等都包括在里面</p>
<p>TCP&#x2F;IP 协议会把这些进行分层，按层次分为4层：应用层、传输层、网络层、数据链路层。</p>
<p>也有细分为7层的，<font color="red">应用层、表示层、会话层、传输层、网络层、数据链路层、物理层<br>像HTTP、FTP、DNS就属于应用层，TCP、UDP在传输层，IP在网络层</font> </p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://github.com/Zskkk/blog-images/raw/master/20210601/01.webp"
                     
                ></p>
<br>

<h1 id="TCP-x2F-IP通信传输流"><a href="#TCP-x2F-IP通信传输流" class="headerlink" title="TCP&#x2F;IP通信传输流"></a>TCP&#x2F;IP通信传输流</h1><p><img  
                     lazyload
                     alt="image"
                     data-src="https://github.com/Zskkk/blog-images/raw/master/20210601/02.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://github.com/Zskkk/blog-images/raw/master/20210601/03.webp"
                     
                ></p>
<font color="red">
以HTTP来举例，首先作为发送端的客户端在应用层以HTTP协议发出一个想看某个Web页面的HTTP请求。在应用层会经过DNS解析，通过域名查找IP地址

<p>接着，为了传输方便，在传输层用了TCP协议把从应用层处收到的数据HTTP请求的报文进行分割，并在各个报文上打上标记序号及端口号转发给网络层</p>
<p>在网络层IP协议，增加作为通信目的地的MAC地址后转发给链路层。</p>
<p>接收端的服务器在链路层接受数据，按序往上层发送，一直到应用层。在传输到传输层的时候，会把接收到的数据包按原来的顺序重组请求报文。当传输到应用层，才算真正接受到由客户端发送过来的HTTP请求。</p>
<p>作为接收端的服务器收到发送端的请求后，会把对应的页面以同样的TCP&#x2F;IP通信协议进行回传。</p>
<p>发送端在层与层之间传输数据时，每经过一层时会被打上该层所属的首部信息，反之，接受端在层与层传输数据时，每经过一层时会把对应的首部消去。<br></font></p>
<br>

<h1 id="TCP协议的可靠性（三次握手）"><a href="#TCP协议的可靠性（三次握手）" class="headerlink" title="TCP协议的可靠性（三次握手）"></a>TCP协议的可靠性（三次握手）</h1><p>TCP位于传输层，提供可靠的字节流服务。<br>所谓字节流服务指，为了方便传输，将大块数据分割成报文段为单位的数据包进行管理，可靠性指能够准确可靠的传输给对方。一言以蔽之，<font color="red">TCP协议为了更容易传输大数据才把数据分割，而且TCP协议能够确认数据最终是否送达对方。</font></p>
<p>确保数据能到达目标<br>为了准确无误的将数据送达目标处，TCP协议采用了三次握手策略。用TCP协议把数据包送出去后，TCP不会对传送后的情况置之不理，它一定会向对方确认是否成功送达，握手过程中使用了TCP的标志SYN和ACK。</p>
<font color="red">
发送端首先发送一个带SYN标志的数据包给对方。
接收端收到后，回传一个带有SYN/ACK标志的数据包以示传达确认信息。
最后，发送端再回传一个带ACK标志的数据包，代表握手结束。
若在握手过程中某个阶段莫名中断，TCP协议会再次以相同的顺序发送相同的数据包。
</font>

<br>

<h1 id="为什么不是二次，四次握手，而是三次？"><a href="#为什么不是二次，四次握手，而是三次？" class="headerlink" title="为什么不是二次，四次握手，而是三次？"></a>为什么不是二次，四次握手，而是三次？</h1><h2 id="四次？"><a href="#四次？" class="headerlink" title="四次？"></a>四次？</h2><p>很显然1.2和1.3 这两个步骤可以合并，<strong>只需要三次握手</strong>，可以提高连接的速度与效率。</p>
<br>

<h2 id="二次？"><a href="#二次？" class="headerlink" title="二次？"></a>二次？</h2><p>现假定出现一种异常情况，即A发出的第一个请求连接报文段并没有丢失，而是<strong>在某些网络结点长时间滞留了</strong>，以至到连接释放以后的某个时间才到达B。本来这是一个已失效的报文段。但B收到此失效的连接请求报文段后，就<strong>误认为</strong>是A又发出一次新的连接请求。于是就向A发出确认报文段，同意建立连接。<strong>假定不采用三次握手，那么只要B发出确认，新的连接就建立了。</strong></p>
<p>由于现在A并没有发出建立请求的连接，因此<strong>不会理睬B的确认，也不会向B发送数据</strong>，但B却以为新的运输连接已经建立了，并<strong>一直等待A发来的数据。B的许多资源就这样白白浪费了。</strong></p>
<p>采用三次握手的办法可以防止上述现象发生。例如在刚才的情况下，A不会向B的确认发出确认。<strong>B由于收不到确认，就知道A并没有要求建立连接，所以就不会分配资源给这个连接</strong></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://github.com/Zskkk/blog-images/raw/master/20210601/04.webp"
                     
                ></p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://github.com/Zskkk/blog-images/raw/master/20210601/05.webp"
                     
                ></p>
<br>

<h1 id="HTTP-是不保存状态的协议"><a href="#HTTP-是不保存状态的协议" class="headerlink" title="HTTP 是不保存状态的协议"></a>HTTP 是不保存状态的协议</h1><p>HTTP 是一种不保存状态，即无状态（stateless）协议。HTTP 协议自 身不对请求和响应之间的通信状态进行保存。也就是说在 HTTP 这个 级别，协议对于发送过的请求或响应都不做持久化处理。</p>
<p>虽然是无状态协议，但为了实现期望的保持状态功能，于是引入了Cookie 技术。有了 Cookie 再用 HTTP 协议通信，就可以管 理状态了。</p>
<br>

<h2 id="持久连接"><a href="#持久连接" class="headerlink" title="持久连接"></a>持久连接</h2><p>HTTP&#x2F;1.1 和一部分的HTTP&#x2F;1.0 想出了 持久连接（HTTP Persistent Connections，也称为 HTTP keep-alive 或 HTTP connection reuse）的方法。持久连接的特点是，只要任意一端 没有明确提出断开连接，则保持 TCP 连接状态。</p>
<p>持久连接的好处在于减少了 TCP 连接的重复建立和断开所造成的额 外开销，减轻了服务器端的负载。另外，减少开销的那部分时间，使 HTTP 请求和响应能够更早地结束，这样 Web 页面的显示速度也就相 应提高了。</p>
<p><img  
                     lazyload
                     alt="image"
                     data-src="https://github.com/Zskkk/blog-images/raw/master/20210601/06.webp"
                     
                ></p>
<p>持久连接的好处在于减少了 TCP 连接的重复建立和断开所造成的额 外开销，减轻了服务器端的负载。另外，减少开销的那部分时间，使 HTTP 请求和响应能够更早地结束，这样 Web 页面的显示速度也就相 应提高了。</p>
<br>

<h1 id="四次挥手："><a href="#四次挥手：" class="headerlink" title="四次挥手："></a>四次挥手：</h1><p><font color="red">TCP连接是双向传输的对等的模式，就是说双方都可以同时向对方发送或接收数据。当有一方要关闭连接时，会发送指令告知对方，我要关闭连接了。这时对方会回一个ACK，此时一个方向的连接关闭。但是另一个方向仍然可以继续传输数据，等到发送完了所有的数据后，会发送一个FIN段来关闭此方向上的连接。接收方发送ACK确认关闭连接。</font></p>
<br>

<h1 id="HTTP的缺点"><a href="#HTTP的缺点" class="headerlink" title="HTTP的缺点"></a>HTTP的缺点</h1><font color="red">
通信使用明文（不加密），内容可能会被窃听

<p>不验证通信方的身份，因此有可能遭遇伪装</p>
<p>无法证明报文的完整性，所以有可能已遭篡改<br></font></p>
<p>对于 HTTP 来说，服务器也好，客户端也好，都是没有办法确认通信方的。因为很有可能并不是和原本预想的通信方在实际通信。 并且还需要考虑到接收到的报文在通信途中已经遭到篡改这一可能性。</p>
<p>为了统一解决上述这些问题，<font color="red">需要在 HTTP 上再加入加密处理和认证 等机制。我们把添加了加密及认证机制的 HTTP 称为 HTTPS</font></p>
<h2 id="通信的加密"><a href="#通信的加密" class="headerlink" title="通信的加密"></a>通信的加密</h2><p>一种方式就是将通信加密。<font color="red">HTTP 协议中没有加密机制，但可以通过和 SSL（Secure Socket Layer，安全套接层）或 TLS（Transport Layer Security，安全层传输协议）的组合使用， 加密 HTTP 的通信内容。</font></p>
<p>用 SSL建立安全通信线路之后，就可以在这条线路上进行 HTTP 通信了。与 <font color="red">SSL组合使用的HTTP 被称为 HTTPS</font>（HTTP Secure，超文本传输安全协议）。</p>
<br>

<h1 id="HTTP-加密-认证-完整性保护-x3D-HTTPS"><a href="#HTTP-加密-认证-完整性保护-x3D-HTTPS" class="headerlink" title="HTTP+ 加密 + 认证 + 完整性保护 &#x3D;HTTPS"></a>HTTP+ 加密 + 认证 + 完整性保护 &#x3D;HTTPS</h1><p><font color="red">可以说HTTPS 是身披 SSL 外壳的 HTTP</font></p>
<p>HTTPS 并非是应用层的一种新协议。只是 HTTP 通信接口部分用 SSL和TLS协议代 替而已。</p>
<p>通常，<font color="red">HTTP 直接和 TCP 通信。当使用 SSL时，则演变成先和 SSL通信</font>，再由 SSL和 TCP 通信了。简言之，所谓HTTPS，其实就是身披 SSL协议这层外壳的 HTTP。</p>
<p><font color="red">在采用 SSL后，HTTP 就拥有了 HTTPS 的加密、证书和完整性保护 这些功能。</font><br><img  
                     lazyload
                     alt="image"
                     data-src="https://github.com/Zskkk/blog-images/raw/master/20210601/07.webp"
                     
                ></p>
<br>

<h2 id="SSL-x2F-TLS加密"><a href="#SSL-x2F-TLS加密" class="headerlink" title="SSL&#x2F;TLS加密"></a>SSL&#x2F;TLS加密</h2><p><img  
                     lazyload
                     alt="image"
                     data-src="https://github.com/Zskkk/blog-images/raw/master/20210601/08.webp"
                     
                ><br><font color="red"><br>第一次访问采用非对称加解密（非对称指客户端和服务器都有自己的公钥和私钥）<br>客户端访问服务器，</p>
<p>服务器收到客户端访问返回服务器的公钥，</p>
<p>客户端收到服务器的公钥，用服务器的公钥对客户端的公钥进行加密发送给服务器，</p>
<p>服务器收到加密后的公钥，用服务器的私钥进行解密取得客户端的公钥，</p>
<p>将session key用客户端的公钥进行加密发送给客户端，</p>
<p>客户端用自己的私钥进行解密获取session key<br></font></p>
<br>

<p>后续通信使用对称加解密（对称加密指客户端和服务器使用同一套公钥私钥）<br>对session key加密后发送session key进行通信</p>
<p>非对称加解密只是用于session key安全的在两者之间进行传递，因为非对称加解密的开销很大。session key是有时效性的</p>
<br>

<h2 id="加入了抓包软件后SSL-x2F-TLS加密"><a href="#加入了抓包软件后SSL-x2F-TLS加密" class="headerlink" title="加入了抓包软件后SSL&#x2F;TLS加密"></a>加入了抓包软件后SSL&#x2F;TLS加密</h2><p><img  
                     lazyload
                     alt="image"
                     data-src="https://github.com/Zskkk/blog-images/raw/master/20210601/09.webp"
                     
                ><br><font color="red"><br>Charles对客户端来说是服务器，对服务器来说是客户端</p>
<p>1.客户端去访问Charles，Charles去访问服务器</p>
<p>2.服务器会给Charles发送服务器的公钥，Charles会给客户端发送Charles的公钥</p>
<p>3.客户端用Charles的公钥对自己的公钥进行加密发送给Charles，Charles用服务器的公钥对自己的公钥进行加密发送给服务器</p>
<p>4.服务器用自己的私钥解开得到Charles的公钥，Charles用自己的私钥解开得到客户端的公钥</p>
<p>5.服务器得到Charles的公钥对session key加密发送给Charles，Charles用自己的私钥解开得到session key</p>
<p>6.Charles把session key用客户端的公钥对session key加密后发送给客户端，客户端用自己的私钥解开得到session key<br>到这里客户端，Charles，服务器的session key就统一了。<br></font></p>
<h2 id="Charles抓不到包"><a href="#Charles抓不到包" class="headerlink" title="Charles抓不到包"></a>Charles抓不到包</h2><p>打开Charles抓不到包，为什么导入Charles的证书之后，app抓包就正常了呢？<br><img  
                     lazyload
                     alt="image"
                     data-src="https://github.com/Zskkk/blog-images/raw/master/20210601/10.webp"
                     
                ></p>
<font color="red">
有了Charles置于中间之后，本来c/s架构的通信过程会“分裂”为两个独立的通信过程，app本来验证的是服务器的证书，服务器的证书手机的根证书是认可的，直接内置的；但是分裂成两个独立的通信过程之后，app验证的是Charles的证书，它的证书手机根证书并不认可，它并不是由手机内置的权威根证书签发机构签发的，所以手机不认，然后app也不认；所以我们要把Charles的证书导入到手机根证书目录中去，这样手机就会认可，如果app没有进行额外的校验（比如在代码中对该证书进行校验，也就是SSL pinning系列API)的话，app也会直接认可接受。

<br>

<p>在高版本的安卓上，用户安装的证书不会直接安装到系统根证书目录<br>中，需要root手机后将证书移动到系统根证书目录中去。<br></font></p>
<p> 当Charles的证书安装到系统根目录中去之后，系统就会信任来自Charles的流量包了，我们的抓包过程就会回归正常</p>
<p> 1.安装个人证书<br> 通过VPN连接到Charles，然后用浏览器访问chls.pro&#x2F;ssl，会自动弹出安装个人证书。</p>
<p> 个人证书安装在手机的 &#x2F;data&#x2F;misc&#x2F;user&#x2F;0&#x2F;cacerts-added 目录下</p>
<p> 2.复制个人证书到系统目录（安卓8以上需要）<br> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /data/misc/user/0/cacerts-added/ </span><br><span class="line">mount -o remount,rw /system</span><br><span class="line">mv * /etc/security/cacerts/ </span><br><span class="line">cd  /etc/security/cacerts/</span><br><span class="line">ls -alit </span><br><span class="line">mount -o remount,ro /system</span><br></pre></td></tr></table></figure></p>
<br>

<h2 id="SSL-Pinning（情况更少）"><a href="#SSL-Pinning（情况更少）" class="headerlink" title="SSL Pinning（情况更少）"></a>SSL Pinning（情况更少）</h2> <font color="red">
 就是客户端并不会默认信任系统根证书目录中的证书，而是在代码里再加一层校验，这就是证书绑定机制——SSL pinning，如果这段代码的校验过不了，那么客户端还是会报证书错误。
 </font>

 <br>

<h2 id="Https客户端代码校验服务器证书"><a href="#Https客户端代码校验服务器证书" class="headerlink" title="Https客户端代码校验服务器证书"></a>Https客户端代码校验服务器证书</h2><p> 案例：滴答清单</p>
<p>遇到这种情况的时候，有这两种方式，当然目标是一样的，都是hook住这段校验的代码，使这段判断的机制失效即可。</p>
<ol>
<li>hook住checkServerTrusted，将其所有重载都置空；</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hook_ssl</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Java</span>.<span class="title function_">perform</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="title class_">ClassName</span> = <span class="string">&quot;com.android.org.conscrypt.Platform&quot;</span>;</span><br><span class="line">        <span class="keyword">var</span> <span class="title class_">Platform</span> = <span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="title class_">ClassName</span>);</span><br><span class="line">        <span class="keyword">var</span> targetMethod = <span class="string">&quot;checkServerTrusted&quot;</span>;</span><br><span class="line">        <span class="keyword">var</span> len = <span class="title class_">Platform</span>[targetMethod].<span class="property">overloads</span>.<span class="property">length</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(len);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; ++i) &#123;</span><br><span class="line">            <span class="title class_">Platform</span>[targetMethod].<span class="property">overloads</span>[i].<span class="property">implementation</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;class:&quot;</span>, <span class="title class_">ClassName</span>, <span class="string">&quot;target:&quot;</span>, targetMethod, <span class="string">&quot; i:&quot;</span>, i, <span class="variable language_">arguments</span>);</span><br><span class="line">                <span class="comment">//printStack(ClassName + &quot;.&quot; + targetMethod);</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br>

<ol start="2">
<li>使用objection，直接将SSL pinning给disable掉  android sslpinning disable</li>
</ol>
<br>

<ol start="3">
<li>如果还有一些情况没有覆盖的话，可以来看看<br><a class="link"   target="_blank" rel="noopener" href="https://github.com/WooyunDota/DroidSSLUnpinning" >https://github.com/WooyunDota/DroidSSLUnpinning<i class="fas fa-external-link-alt"></i></a></li>
</ol>
<ul>
<li><p>目录ObjectionUnpinningPlus增加了ObjectionUnpinning没覆盖到的锁定场景.(objection)</p>
<ul>
<li><p>使用方法1 attach : frida -U com.example.mennomorsink.webviewtest2 —no-pause -l hooks.js</p>
</li>
<li><p>使用方法2 spawn : python application.py com.example.mennomorsink.webviewtest2</p>
</li>
</ul>
</li>
<li><p>ObjectionUnpinningPlus hook list:</p>
<ul>
<li><p>SSLcontext(ART only)</p>
</li>
<li><p>okhttp</p>
</li>
<li><p>webview</p>
</li>
<li><p>XUtils(ART only)</p>
</li>
<li><p>httpclientandroidlib</p>
</li>
<li><p>JSSE</p>
</li>
<li><p>network_security_config (android 7.0+)</p>
</li>
<li><p>Apache Http client (support partly)</p>
</li>
<li><p>OpenSSLSocketImpl</p>
</li>
<li><p>TrustKit</p>
</li>
</ul>
</li>
</ul>
<p>应该可以覆盖到目前已知的所有种类的证书绑定了。</p>
<br>

<h2 id="服务器校验客户端证书（情况少）"><a href="#服务器校验客户端证书（情况少）" class="headerlink" title="服务器校验客户端证书（情况少）"></a>服务器校验客户端证书（情况少）</h2> <font color="red">
既然app客户端会校验服务器证书，那么服务器可不可能校验app客户端证书呢？答案是肯定的。

<p>单一通信已经分裂成两个互相独立的通信，这时候与服务器进行通信的已经不是app、而是Charles了，所以我们要将app中内置的证书导入到Charles中去。</p>
<p>这个操作通常需要完成两项内容：</p>
<ol>
<li>找到证书文件</li>
<li>找到证书密码</li>
</ol>
</font>

<br>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hook_KeyStore_load</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Java</span>.<span class="title function_">perform</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> <span class="title class_">StringClass</span> = <span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&quot;java.lang.String&quot;</span>);</span><br><span class="line">        <span class="keyword">var</span> <span class="title class_">KeyStore</span> = <span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&quot;java.security.KeyStore&quot;</span>);</span><br><span class="line">        <span class="title class_">KeyStore</span>.<span class="property">load</span>.<span class="title function_">overload</span>(<span class="string">&#x27;java.security.KeyStore$LoadStoreParameter&#x27;</span>).<span class="property">implementation</span> = <span class="keyword">function</span> (<span class="params">arg0</span>) &#123;</span><br><span class="line">            <span class="comment">//printStack(&quot;KeyStore.load1&quot;);</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&quot;android.util.Log&quot;</span>).<span class="title function_">getStackTraceString</span>(<span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&quot;java.lang.Throwable&quot;</span>).$new()));</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;KeyStore.load1:&quot;</span>, arg0);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">load</span>(arg0);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="title class_">KeyStore</span>.<span class="property">load</span>.<span class="title function_">overload</span>(<span class="string">&#x27;java.io.InputStream&#x27;</span>, <span class="string">&#x27;[C&#x27;</span>).<span class="property">implementation</span> = <span class="keyword">function</span> (<span class="params">arg0, arg1</span>) &#123;</span><br><span class="line">            <span class="comment">//printStack(&quot;KeyStore.load2&quot;);</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&quot;android.util.Log&quot;</span>).<span class="title function_">getStackTraceString</span>(<span class="title class_">Java</span>.<span class="title function_">use</span>(<span class="string">&quot;java.lang.Throwable&quot;</span>).$new()));</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;KeyStore.load2:&quot;</span>, arg0, arg1 ? <span class="title class_">StringClass</span>.$new(arg1) : <span class="literal">null</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">load</span>(arg0, arg1);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hook_KeyStore_load...&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">setImmediate</span>(hook_KeyStore_load)</span><br></pre></td></tr></table></figure>
 <font color="red">
找到证书文件很简单，一般apk进行解包，直接过滤搜索后缀名为p12的文件即可，一般常用的命令为 tree -NCfhl |grep -i p12，直接打印出p12文件的路径

<p>想要拿到密码也很简单，一般解密会调用现成的API，java.security.KeyStore ，直接使用frida打印出来，也可以hook系统文件库</p>
</font>

<br>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">objection -g cn.soulapp.android explore</span><br><span class="line">//android hooking watch class_method java.io.File.$init - -dump-args --dump-backtrace --dump-return</span><br><span class="line">android hooking watch class_method java.io.File.$init - -dump-args</span><br></pre></td></tr></table></figure>

<p>有了证书和密码之后，就可以将其导入到抓包软件中</p>
<br>

<p><img  
                     lazyload
                     alt="image"
                     data-src="https://github.com/Zskkk/blog-images/raw/master/20210601/11.webp"
                     
                ></p>
<font color="red">
一般HTTPS：大部分只采用客户端检验服务器

<p>双向绑定：很少会有服务器校验客户端</p>
</font>

<p>SSL cert Pinning：更少（案例：趣充）</p>
<br>

<h2 id="推荐使用Postern-Charles组合进行抓包"><a href="#推荐使用Postern-Charles组合进行抓包" class="headerlink" title="推荐使用Postern+Charles组合进行抓包"></a>推荐使用Postern+Charles组合进行抓包</h2><p>我们平时用代理的时候，都是通过给wifi设置http代理的方式进行抓包，只是在应用层抓包，所以会被很轻易的检测到和绕过的。</p>
<p> 很多应用会通过</p>
<p>System.getProperty(“http.proxyHost”)</p>
<p>System.getProperty(“http.proxyPort”);</p>
<p>这两个API来查看当前系统是否挂了http代理，会很轻松的让你的抓包失效。</p>
<p>这时候只能用Frida或Xposed来hook这个接口、修改其返回值</p>
<br>
所以我们需要换一种方式来设置代理。就是设置vpn代理，vpn是属于网络层的，设置了vpn后，你的手机上ifconfig后会多一个tun0的接口，等于加了一个虚拟网卡，所有的流量都会从这走。应用层和传输层的请求都可以拿到，还不会被上面提及的两个api所检测。

<br>

<p>输入ip route show table 0 |grep defalut查看路由表</p>
<p>路由表的第一条就指向了tun0，可以说开vpn的效果就和直连的效果一摸一样。</p>

            </div>

            
                <div class="post-copyright-info">
                    <div class="article-copyright-info-container">
    <ul class="copyright-info-content">
        <li>
            <span class="type">本文标题</span>：<span class="content">HTTP TCP/IP协议与抓包原理</span>
        </li>
        <li>
            <span class="type">本文作者</span>：<span class="content">zsk</span>
        </li>
        <li>
            <span class="type">创建时间</span>：<span class="content">2021-06-01 00:00:00</span>
        </li>
        <li class="post-link">
            <span class="type">本文链接</span>：<span class="content">20210601/HTTP-TCP-IP协议与抓包原理.html</span>
        </li>
        <li>
            <span class="type">版权声明</span>：<span class="content">本博客所有文章除特别声明外，均采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> 许可协议。转载请注明出处！</span>
        </li>
    </ul>
</div>

                </div>
            

            
                <ul class="post-tags-box">
                    
                        <li class="tag-item">
                            <a href="/tags/%E6%8A%93%E5%8C%85/">#抓包</a>&nbsp;
                        </li>
                    
                </ul>
            

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                               rel="prev"
                               href="/20210607/%E5%88%B7%E6%9C%BA.html"
                            >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                                <span class="title flex-center">
                                <span class="post-nav-title-item">刷机</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                            </a>
                        </div>
                    
                    
                        <div class="article-next">
                            <a class="next"
                               rel="next"
                               href="/20210428/App%E5%B8%A6%E5%A3%B3%E9%87%8D%E6%89%93%E5%8C%85%E5%8E%BB%E5%BC%BA%E5%88%B6%E5%8D%87%E7%BA%A7.html"
                            >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">App带壳重打包去强制升级</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                                <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                            </a>
                        </div>
                    
                </div>
            

            
                <div class="comment-container">
                    
<div class="comments-container">
    <div id="comments-anchor"></div>
    <div class="comment-area-title">
        <i class="fas fa-comments"></i>&nbsp;评论
    </div>
    
        
            

    <div class="valine-container">
        <script  src="//cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js"></script>
        <div id="vcomments"></div>
        <script >
          function loadValine() {
            new Valine({
              el: '#vcomments',
              appId: 'WxNQs5QEQtykF82Sb7nAjXRO-gzGzoHsz',
              appKey: '4rZ6NwH5zAu6VEspHwVrgqOq',
              meta: ['nick', 'mail', 'link'],
              avatar: 'wavatar',
              enableQQ: true,
              placeholder: '😜 尽情吐槽吧~',
              lang: 'zh-CN'.toLowerCase()
            });

            function getAuthor(language) {
              switch (language) {
                case 'en':
                  return 'Author';
                case 'zh-CN':
                  return '博主';
                default:
                  return 'Master';
              }
            }

            // Add "Author" identify
            const getValineDomTimer = setInterval(() => {
              const vcards = document.querySelectorAll('#vcomments .vcards .vcard');
              if (vcards.length > 0) {
                let author = 'zsk';

                if (author) {
                  for (let vcard of vcards) {
                    const vnick_dom = vcard.querySelector('.vhead .vnick');
                    const vnick = vnick_dom.innerHTML;
                    if (vnick === author) {
                      vnick_dom.innerHTML = `${vnick} <span class="author">${getAuthor(KEEP.hexo_config.language)}</span>`
                    }
                  }
                }
                clearInterval(getValineDomTimer);
              } else {
                clearInterval(getValineDomTimer);
              }
            }, 2000);
          }

          if ('false' === 'true') {
            const loadValineTimeout = setTimeout(() => {
              loadValine();
              clearTimeout(loadValineTimeout);
            }, 1000);
          } else {
            window.addEventListener('DOMContentLoaded', loadValine);
          }
        </script>
    </div>



        
    
</div>

                </div>
            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80-TCP-x2F-IP"><span class="nav-number">1.</span> <span class="nav-text">网络基础 TCP&#x2F;IP</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#TCP-x2F-IP%E9%80%9A%E4%BF%A1%E4%BC%A0%E8%BE%93%E6%B5%81"><span class="nav-number">2.</span> <span class="nav-text">TCP&#x2F;IP通信传输流</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#TCP%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%80%A7%EF%BC%88%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%EF%BC%89"><span class="nav-number">3.</span> <span class="nav-text">TCP协议的可靠性（三次握手）</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E6%98%AF%E4%BA%8C%E6%AC%A1%EF%BC%8C%E5%9B%9B%E6%AC%A1%E6%8F%A1%E6%89%8B%EF%BC%8C%E8%80%8C%E6%98%AF%E4%B8%89%E6%AC%A1%EF%BC%9F"><span class="nav-number">4.</span> <span class="nav-text">为什么不是二次，四次握手，而是三次？</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E6%AC%A1%EF%BC%9F"><span class="nav-number">4.1.</span> <span class="nav-text">四次？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E6%AC%A1%EF%BC%9F"><span class="nav-number">4.2.</span> <span class="nav-text">二次？</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HTTP-%E6%98%AF%E4%B8%8D%E4%BF%9D%E5%AD%98%E7%8A%B6%E6%80%81%E7%9A%84%E5%8D%8F%E8%AE%AE"><span class="nav-number">5.</span> <span class="nav-text">HTTP 是不保存状态的协议</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%81%E4%B9%85%E8%BF%9E%E6%8E%A5"><span class="nav-number">5.1.</span> <span class="nav-text">持久连接</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%EF%BC%9A"><span class="nav-number">6.</span> <span class="nav-text">四次挥手：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HTTP%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="nav-number">7.</span> <span class="nav-text">HTTP的缺点</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%9A%E4%BF%A1%E7%9A%84%E5%8A%A0%E5%AF%86"><span class="nav-number">7.1.</span> <span class="nav-text">通信的加密</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HTTP-%E5%8A%A0%E5%AF%86-%E8%AE%A4%E8%AF%81-%E5%AE%8C%E6%95%B4%E6%80%A7%E4%BF%9D%E6%8A%A4-x3D-HTTPS"><span class="nav-number">8.</span> <span class="nav-text">HTTP+ 加密 + 认证 + 完整性保护 &#x3D;HTTPS</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SSL-x2F-TLS%E5%8A%A0%E5%AF%86"><span class="nav-number">8.1.</span> <span class="nav-text">SSL&#x2F;TLS加密</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A0%E5%85%A5%E4%BA%86%E6%8A%93%E5%8C%85%E8%BD%AF%E4%BB%B6%E5%90%8ESSL-x2F-TLS%E5%8A%A0%E5%AF%86"><span class="nav-number">8.2.</span> <span class="nav-text">加入了抓包软件后SSL&#x2F;TLS加密</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Charles%E6%8A%93%E4%B8%8D%E5%88%B0%E5%8C%85"><span class="nav-number">8.3.</span> <span class="nav-text">Charles抓不到包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SSL-Pinning%EF%BC%88%E6%83%85%E5%86%B5%E6%9B%B4%E5%B0%91%EF%BC%89"><span class="nav-number">8.4.</span> <span class="nav-text">SSL Pinning（情况更少）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Https%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BB%A3%E7%A0%81%E6%A0%A1%E9%AA%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%81%E4%B9%A6"><span class="nav-number">8.5.</span> <span class="nav-text">Https客户端代码校验服务器证书</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%A0%A1%E9%AA%8C%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%81%E4%B9%A6%EF%BC%88%E6%83%85%E5%86%B5%E5%B0%91%EF%BC%89"><span class="nav-number">8.6.</span> <span class="nav-text">服务器校验客户端证书（情况少）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8Postern-Charles%E7%BB%84%E5%90%88%E8%BF%9B%E8%A1%8C%E6%8A%93%E5%8C%85"><span class="nav-number">8.7.</span> <span class="nav-text">推荐使用Postern+Charles组合进行抓包</span></a></li></ol></li></ol>
    </div>
</div>

            </div>
        
    </div>
</div>


                

            </div>

        </div>

        <div class="page-main-content-bottom">
            
<footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
                <span>2021</span> -
            
            2023
            
                &nbsp;<i class="fas fa-heart icon-animate"></i>
                &nbsp;<a href="/">zsk</a>
            
        </div>
        
            <script async 
                    src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    访问人数&nbsp;<span id="busuanzi_value_site_uv"></span>&ensp;
                
                
                    总访问量&nbsp;<span id="busuanzi_value_site_pv"></span>
                
            </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动&nbsp;|&nbsp;主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.5.2</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item flex-center toggle-show-toc">
                <i class="fas fa-list"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="tools-item flex-center go-to-comments">
                <i class="fas fa-comment"></i>
                <span class="post-comments-count"></span>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/dark-light-toggle.js"></script>




    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/code-block.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/lazyload.js"></script>


<div class="post-scripts">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/post-helper.js"></script>
        
            <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/libs/anime.min.js"></script>
        
        
            <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/toc.js"></script>
        
    
</div>



</body>
</html>
